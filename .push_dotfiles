repo="/Users/rae/Projects/dotfiles/"

# hi

commit_msg=$1
if [ "${commit_msg}" == "" ]; then
    printf "Do you want a custom commit message? (y/n) "
    read custom
    if [ "${custom}" == "y" ]; then
        printf "Enter commit message: "
        read commit_msg
    fi
    if [[ "${custom}" != "y" || "${commit_msg}" == "" ]]; then
        commit_msg="dotfiles update $(date +"%Y-%m-%d %T")"
    fi
fi

echo "Copying dotfiles from ~ to ${repo}"
sudo cp ~/.bash_profile ${repo}/.bash_profile
sudo cp ~/.vimrc ${repo}/.vimrc
sudo cp ~/.push_dotfiles ${repo}/.push_dotfiles

cd ${repo}
git add .
git commit -m "${commit_msg}"
git push -u origin master

# assumes you were in ~ originally.
# function push_dotfiles in .bash_profile automatically returns to original
# working directory.
cd ~
